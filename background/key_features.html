<!DOCTYPE html>
<html class="writer-html5" lang="en" data-content_root="../">
<head>
  <meta charset="utf-8" /><meta name="viewport" content="width=device-width, initial-scale=1" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Key Features of TensorWrapper &mdash; TensorWrapper 1.0.0 documentation</title>
      <link rel="stylesheet" type="text/css" href="../_static/pygments.css?v=fa44fd50" />
      <link rel="stylesheet" type="text/css" href="../_static/css/theme.css?v=19f00094" />

  
  <!--[if lt IE 9]>
    <script src="../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script src="../_static/jquery.js?v=5d32c60e"></script>
        <script src="../_static/_sphinx_javascript_frameworks_compat.js?v=2cd50e6c"></script>
        <script src="../_static/documentation_options.js?v=8d563738"></script>
        <script src="../_static/doctools.js?v=9a2dae69"></script>
        <script src="../_static/sphinx_highlight.js?v=dc90522c"></script>
        <script async="async" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
    <script src="../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Existing Tensor Libraries" href="other_choices.html" />
    <link rel="prev" title="Understanding Nested Tensors" href="nested_tensors.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="../index.html">
            
              <img src="../_static/logo_candybar.png" class="logo" alt="Logo"/>
          </a>
              <div class="version">
                1.0.0
              </div>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">Contents:</span></p>
<ul class="current">
<li class="toctree-l1 current"><a class="reference internal" href="index.html">TensorWrapper Background</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="terminology.html">TensorWrapper Terminology</a></li>
<li class="toctree-l2"><a class="reference internal" href="einstein_summation_convention.html">Einstein Summation Convention</a></li>
<li class="toctree-l2"><a class="reference internal" href="logical_v_physical.html">Logical Versus Physical: Understanding the Tensor Layout</a></li>
<li class="toctree-l2"><a class="reference internal" href="nested_tensors.html">Understanding Nested Tensors</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">Key Features of TensorWrapper</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#design-features">Design Features</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#wrapping">Wrapping</a></li>
<li class="toctree-l4"><a class="reference internal" href="#decoupled-expression-layer">Decoupled Expression Layer</a></li>
<li class="toctree-l4"><a class="reference internal" href="#logical-vs-actual-layout">Logical vs Actual Layout</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#math-features">Math Features</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#native-support-for-nested-tensors">Native Support for Nested Tensors</a></li>
<li class="toctree-l4"><a class="reference internal" href="#native-support-for-jagged-tensors">Native Support for Jagged Tensors</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="other_choices.html">Existing Tensor Libraries</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../developer/index.html">Developer Documentation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../sparse_maps/index.html">Sparse Maps Sublibrary</a></li>
<li class="toctree-l1"><a class="reference internal" href="../bibliography/bibliography.html">References</a></li>
<li class="toctree-l1"><a class="reference external" href="https://nwchemex.github.io/TensorWrapper/tensorwrapper_cxx_api/index.html">C++ API</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">TensorWrapper</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../index.html" class="icon icon-home" aria-label="Home"></a></li>
          <li class="breadcrumb-item"><a href="index.html">TensorWrapper Background</a></li>
      <li class="breadcrumb-item active">Key Features of TensorWrapper</li>
      <li class="wy-breadcrumbs-aside">
              <a href="https://github.com/NWChemEx/TensorWrapper/edit/master/docs/source/background/key_features.rst" class="fa fa-github"> Edit on GitHub</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="key-features-of-tensorwrapper">
<h1>Key Features of TensorWrapper<a class="headerlink" href="#key-features-of-tensorwrapper" title="Link to this heading"></a></h1>
<p>There are a lot of tensor libraries out there, the point of this page is to
keep track of what sets TensorWrapper a part.</p>
<section id="design-features">
<h2>Design Features<a class="headerlink" href="#design-features" title="Link to this heading"></a></h2>
<section id="wrapping">
<h3>Wrapping<a class="headerlink" href="#wrapping" title="Link to this heading"></a></h3>
<p>To the extent possible, TensorWrapper aims to graft the other features on this
list on to existing tensor libraries. Admittedly, this requires TensorWrapper
to “factor out” (in practice we have to reimplement since said features are
usually not modularized) some functionality.</p>
</section>
<section id="decoupled-expression-layer">
<h3>Decoupled Expression Layer<a class="headerlink" href="#decoupled-expression-layer" title="Link to this heading"></a></h3>
<p>Most C++ tensor libraries have an expression layer, which relies on
meta-template programming to build up a representation of what the user wants
before actually running the computation. From a computer language perspective,
the expression layer is a <a class="reference internal" href="terminology.html#term-dsl"><span class="std std-ref">domain specific language (DSL)</span></a> which is represented as a
<a class="reference internal" href="terminology.html#term-cst"><span class="std std-ref">concrete syntax tree (CST)</span></a>. To our knowledge, all existing C++ tensor libraries then
execute the CST (potentially after some optimization) in order to compute the
requested result. The problem with such an approach is that the optimizations
and implementations behind the individual operations become coupled to the
syntax of the tensor library’s DSL (because CSTs are written in terms of the
DSL). TensorWrapper follows usual parsing procedures and converts the CST into
an <a class="reference internal" href="terminology.html#term-ast"><span class="std std-ref">abstract syntax tree (AST)</span></a> before optimization and executing occur. In turn, the AST
serves as an intermediate representation which is not tied to the tensor
front end.</p>
</section>
<section id="logical-vs-actual-layout">
<h3>Logical vs Actual Layout<a class="headerlink" href="#logical-vs-actual-layout" title="Link to this heading"></a></h3>
<p>Most distributed tensors have a concept of tiling because ultimately
operations on distributed data are done differently than on local data. In
practice tiling a tensor increases its rank, <em>e.g.</em>, if we tile a matrix along
the rows and columns it becomes a rank four tensor because we need two indices
to select the tile and two indices to select the element within the tile.
However, most tensor libraries still try to treat a tiled tensor as being the
same rank as an un-tiled tensor. In our opinion, this is somewhat awkward
because the tiling modes need to be treated differently than the original modes.
TensorWrapper’s solution is to distinguish between the logical layout of the
tensor (<em>i.e.</em>, how the user declared it) and the actual layout of the tensor
(<em>i.e.</em>, including any additional modes added for performance reasons).</p>
</section>
</section>
<section id="math-features">
<h2>Math Features<a class="headerlink" href="#math-features" title="Link to this heading"></a></h2>
<section id="native-support-for-nested-tensors">
<h3>Native Support for Nested Tensors<a class="headerlink" href="#native-support-for-nested-tensors" title="Link to this heading"></a></h3>
<p>While we have a propensity to think of tensors as having scalar elements, this
need not be the case. For example, a matrix can also be thought of as a vector
of vectors. The key difference between these views is that in the second
providing a single offset is meaningful as it requests an element of the outer
vector. Most tensor libraries require the user to track alternative views
and map them to the more traditional view (in the matrix vs. vector of vector
example the user would have to request a particular slice of the tensor).
Native support for nesting allows slicing to be treated more naturally, it also
opens up the door for…</p>
</section>
<section id="native-support-for-jagged-tensors">
<h3>Native Support for Jagged Tensors<a class="headerlink" href="#native-support-for-jagged-tensors" title="Link to this heading"></a></h3>
<p>We can think of an <span class="math notranslate nohighlight">\(n\)</span> by <span class="math notranslate nohighlight">\(m\)</span> element matrix as an <span class="math notranslate nohighlight">\(n\)</span>
element vector containing <span class="math notranslate nohighlight">\(m\)</span> element vectors. In this scenario, each of
the inner vectors has the same shape. One can also imagine having a vector of
vectors where the inner vectors do not all have the same shape. If we view
such a vector of vectors as a matrix, the resulting matrix will have rows of
different lengths, <em>i.e.</em>, it is a “jagged” matrix. While jagged tensors may
seem exotic they occur quite naturally with sparse data with implicit zeros.</p>
</section>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="nested_tensors.html" class="btn btn-neutral float-left" title="Understanding Nested Tensors" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="other_choices.html" class="btn btn-neutral float-right" title="Existing Tensor Libraries" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2020, NWChemEx Team.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>